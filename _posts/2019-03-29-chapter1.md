---
layout: post
title:  "chapter 1"
date:   2019-03-29
image:
comments: true
---
Chapter1
==========================================
***
## 안드로이드 프레임워크 개요
>안드로이드는 모바일 플랫폼이다.
안드로이드를 운영체제와 미들웨어,그리고 핵심 애플리케이션을 포함한 모바일 디바이스 개발에 적합한 소프트웨어 스택이라 정의한다.즉, 안드로이드는 모바일 디바이스용 애플리케이션을 쉽게 제작하기 위한 소프트웨어 프레임워크를 제공해 준다.

![chapter1_1](https://user-images.githubusercontent.com/38609712/55949283-358ba880-5c8d-11e9-9341-ad8da6992985.jpg)

>안드로이드는 크게 애플리케이션 프레임워크, 라이브러리, 안드로이드 런타임, 리눅스 커널로 구성돼 있다.

>안드로이드 어플리케이션 개발자들은 프레임워크에 제대로 이해하지 않더라도 개발을 할 수 있다.
하지만 안드로이드 플랫폼 개발자라면 프레임워크에 대한 심도 있는 이해는 필수이다.

##안드로이드의 소스 코드 구조

1. Kernel: 안드로이드의 리눅스 커널 2.6

2. bionic: 안드로이드 표준 C 라이브러리

3. bootloader: 참고형 안드로이드 부트로더

4. build: 안드로이드 빌드 시스템

5. cts: 안드로이드 호환성 테스트 관련 소스

6. dalvik: 달빅 가상 머신

7. external: 안드로이드에서 사용하는 오픈소스들

8. frameworks: 안드로이드 프레임워크

9. hardware: 안드로이드 HAL(Hardware Abstraction Layer) 소스

10. packages: 안드로이드 기본 애플리케이션, 컨텐트 프로바이더 등

11. system: 안드로이드 init 프로세스,블루투스 도구 모음 등

이 중에서 kernal,frameworks,packages,system 폴더에 있는 소스코드를 주로 분석할 것이다.

##부팅 프로세스로 알아보는 안드로이드 프레임워크

![chapter1_2](https://user-images.githubusercontent.com/38609712/55950099-15f57f80-5c8f-11e9-9f09-eaf357689a6a.jpg)


1. 리눅스 커널
   >안드로이드는 리눅스 기반의 플랫폼이다. 따라서 부팅 시 부트로더를 통해 리눅스 커널이 시작된다. 일반적인 리눅스 부팅 과정처럼 커널 초기화를 수행하고 마지막에 init 프로세스를 호출함.
2. init
   >각종 디바이스를 초기화하고 데몬,컨텍스트 매니저,미디어 서버, zygote등을 실행하는 역할을 한다.
   >>init 프로세스가 실행하는 데몬
   - USB데몬(usbd): USB연결 관리
   - 안드로이드 디버그 브리지 데몬(adbd):안드로이드 디버그 브리지(ADB) 연결 관리
   - 디버거 데몬(debuggerd): 디버그 시스템 시작
   - 무선 인터페이스 레이어 데몬(rild):무선 통신 연결 관리
3. 컨텍스트 매니저
   >컨텍스트 매니저는 시스템 서비스(카메라,오디오,비디오 처리,중요API제공)을 관리하는 중요한 프로세스이다.

   >시스템 서비스를 이용하고자 할 때는 서비스 매니저에게 요청해야 한다. 요청 후에는 바인더라는 안드로이드의 자체적인 IPC(Inter process communication) 메커니즘을 통해 시스템 서비스를 이용할 수 있다.
   
   >모든 시스템 서비스는 부팅 시 자신의 핸들 정보를 컨텍스트 매니저에 등록해야 한다.

4. 미디어 서버
   >미디어 서버(Media Server) 프로세스는 안드로이드에서 Audio Flinger(오디오 출력을 담당)나 camera 서비스 와 같이 C/C++기반으로 작성돼 있는 네이티브 시스템 서비스를 실행하는 역할을 한다.

5. Zygote
   >Zygote는 안드로이드 애플리케이션의 로딩 시간을 단축하기 위한 프로세스로 모든 자바 기반 안드로이드 애플리케이션은 Zygote를 통해 포크(fork)된 프로세스 상에서 동작한다.

6. 시스템 서버(System server)
   >Zygote에서 최초로 포크되어 실행되는 안드로이드 애플리케이션 프로세스다. 애플리케이션의 생명 주기를 제어하는 액티비티 매니저 서비스나 단말기의 위치 정보를 제공하는 로케이션 매니저 서비스와 같은 자바 시스템 서비스를 실행한다.

   >자바 시스템 서비스도 컨텍스트 매니저에 등록돼 있어야 한다. 그런데 바인더 IPC를 통해 자바 시스템 서비스를 C 언어 기반의 서비스 매니저에 등록하려면 자바와 C언어 간의 인터페이스 역할을 하는 JNI(Java Native Interface)를 추가로 이용해야 한다.
